import tools/dsl/dynjoin/grammar;
import tools/dsl/dsl_eval;
import tools/dsl/dsl_runtime_common;

main() {
	grammar = defineDynJoin();
	program = parseProgram("test", grammar, <<
		~a = 2+3;
		println(5);	// Should happen at compile time
		a
	>>);

	env0 = makeDslEnv();
	env = DslEnv(env0 with locals = addCommonDslRuntime([], env0.locals));

	println(prettyDsl(program));

	value = evaluateDsl(env, program);
	println(prettyDsl(value));
	quit(0);
}
