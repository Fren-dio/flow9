import tools/flow9/types/cgraph/cgraph;
import tools/flow9/types/cgraph/pretty;
import tools/flow9/types/ugraph/tmap;

export {
	// Find all subtypes of this (super) node
	makeSubtypeOverload(tmap : TMap, node : CNode, reason : ErrorReason) -> CNode;

	// Find all supertypes of this (sub)node
	makeSupertypeOverload(tmap : TMap, node : CNode, reason : ErrorReason) -> CNode;
}

makeSubtypeOverload(tmap : TMap, node : CNode, reason0 : ErrorReason) -> CNode {
	todo = \ -> {
		println("TODO: Find all sub types of " + prettyCNode(tmap.cmap, node));
		node;
	}
	switch (node) {
		CEpsilon(): todo();
		CName(name, typars, reason): {
			todo();
		}
		CFunction(args, return, reason): {
			todo();
		}
		COverload(unique, options, reason): {
			todo();
		}
	}
}

makeSupertypeOverload(tmap : TMap, node : CNode, reason0 : ErrorReason) -> CNode {
	todo = \ -> {
		println("TODO: Find all super types of " + prettyCNode(tmap.cmap, node));
		node;
	}
	switch (node) {
		CEpsilon(): todo();
		CName(name, typars, reason): {
			todo();
		}
		CFunction(args, return, reason): {
			todo();
		}
		COverload(unique, options, reason): {
			todo();
		}
	}
}
