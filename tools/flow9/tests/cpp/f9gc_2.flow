native println2 : io (flow) -> void = Native.println;

Struct(val : int);

main() {
	dx = 10;
	val = Struct(1);
	println2(val);
	inc = \val -> val + dx;
	val3 = inc(2);
	println2(val3);
}

/* BEFORE dx
BProgram(
	TreeNode("Struct", DStruct("Struct", false, [], [DStructArg("flow_val", false, DTypeName("int", [], 68), 62)], 55), TreeEmpty(), TreeEmpty(), 1),
	TreeEmpty(),
	[
		BExpNative("flow_println2", true, BTypeFunction([BTypeName("flow", [])], BTypeName("void", [])), "Native.println"),
		BStatFunction(
			"flow_main",
			[],
			BLetStatement(
				"flow_val",
				BConstruct("Struct", [BInt(1)], BTypeName("Struct", [])),
				BSequenceStatement([
					BReturn(BCall(
						BVar("flow_println2", BTypeFunction([BTypeName("flow", [])], BTypeName("void", []))),
						[BVar("flow_val", BTypeName("Struct", []))],
						BTypeName("void", [])
					)),
					BLetStatement(
						"flow_inc",
						BLambda(
							["flow_val"],
							BCall(BVar("+", BTypeFunction([BTypeName("int", []), BTypeName("int", [])], BTypeName("int", []))), [BVar("flow_val", BTypeName("int", [])), BInt(1)], BTypeName("int", [])),
							BTypeFunction([BTypeName("int", [])], BTypeName("int", []))
						),
						BLetStatement(
							"flow_val3",
							BCall(
								BVar("flow_inc", BTypeFunction([BTypeName("int", [])], BTypeName("int", []))),
								[BInt(2)],
								BTypeName("int", [])
							),
							BReturn(BCall(
								BVar("flow_println2", BTypeFunction([BTypeName("flow", [])], BTypeName("void", []))),
								[BVar("flow_val3", BTypeName("int", []))],
								BTypeName("void", [])
							))
						)
					)
				])
			),
			false,
			BTypeFunction([], BTypeName("void", []))
		)
	]
)
*/