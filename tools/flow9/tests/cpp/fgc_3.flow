native map : ([?], (?) -> ??) -> [??] = Native.map;
native println2 : io (flow) -> void = Native.println;

Struct(val : ref int);

main() {
	println2("Create init array");
	arr = [1, 2, 3];

	val = 5;
	println2("\nCreate array by map()");
	arr2 = map(arr, \v -> val);
	println2("\nPrint new array");
	println2(arr2); // [5, 5, 5]
	
	valRef = Struct(ref 6);
	println2("\nCreate array by map() from Ref");
	arr3 = map(arr, \v -> valRef);
	valRef.val := 7;
	println2("\nPrint new array");
	println2(arr3); // [Struct{ref 7}, Struct{ref 7}, Struct{ref 7}]
	
	println2("\nEND");
}
