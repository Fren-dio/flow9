Maybe<?> ::= None, Some<?>;
	None();
	Some(value : ?);

native toString2 : (flow) -> string = Native.toString2;
native println2 : io (flow) -> void = Native.println2;
native s2a : (string) -> [int] = Native.s2a;

native toBinary : (value : flow) -> string = Native.toBinary;
// native fromBinary : (s : string, default_ : flow, fixups : (string)->Maybe<([flow])->flow>) -> flow = Native.fromBinary;


native quit : io (code : int) -> void = Native.quit;

main() {
	println2("start");

	x = "12.4";
	xb = toBinary(x);
	println2("String " + x + ":");
	println2(s2a(xb));
	println2("");

	y = 3.45;
	yb = toBinary(y);
	// [7, 0, 65532, 39322, 39321, 39321, 16395, 65527]
	println2("Float " + toString2(y) + ":");
	println2(s2a(yb));
	println2("");

	z = [1.0, 2.0];
	zb = toBinary(z);
	println2("Array " + toString2(z) + ":");
	println2(s2a(zb));
	println2("");
	z2 = [1, 2];
	zb2 = toBinary(z2);
	println2("ArrayI " + toString2(z2) + ":");
	println2(s2a(zb2));
	println2("");

	p = 14;
	pb = toBinary(p);
	println2("Int " + toString2(p) + ":");
	println2(s2a(pb));
	println2("");

	q = 143763;
	qb = toBinary(q);
	println2("Large int " + toString2(q) + ":");
	println2(s2a(qb));
	println2("");

	m = Some([Some("bla"), None(), Some("")]);
	mb = toBinary(m);
	println2("Struct " + toString2(m) + ":");
	println2(s2a(mb));
	println2("");

	y2 = 1447671199000.0;
	y2b = toBinary(y2);
	println2("Float " + toString2(y2) + ":");
	println2(s2a(y2b));
	println2("");
	
	quit(0);
}