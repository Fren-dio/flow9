import material/material2tropic;

main() {
	manager = makeMaterialManager([]);
	setRendererType("html");

	leftTop = makePoint();
	fpprint("leftTop")(leftTop);

	size = makeWH();
	fpprint("size")(size);

	movableMousePosition = makePoint();

	content = MGroup2(
		MFrame(0., 0., [MFill(MBlue(200))], TFillXY()),
		MMovable(
			MFrame(0., 0., [MFill(MRed(200))],
				MResizable(
					TFillXY(),
					[
						MResizableOnCreate(TFixed(100., 100.)),
						MCustomHandler(\__ ->
							MFrame(0., 0., [MFill(MBlack())], TFixed(10., 10.))
						),
						MUpdateMovable(leftTop, movableMousePosition)
					]
				)
				|> (\m -> MAttachBox(m, size))
			),
			TFillXY(),
			[
				MMovablePosition(leftTop),
				MMousePosition(movableMousePosition),
				// MMovableOrigin(const(Factor(1., 1.)))
			]
		)
	);

	mrender(manager, true, content);
}