import material/material;

export {
	// Handle these shortcuts
	// Example:
	//	
	MKeyHandler(keys : [Pair<string, () -> void>], m : Material) -> Material;
}

MKeyHandler(keys : [Pair<string, () -> void>], m : Material) -> Material {
	keyFilter = makeTKey(\key : KeyEvent -> {
		exists(keys, \k -> {
			matchShortcut(key, parseShortcut(k.first))
		})
	});

    keyHandler = \key : KeyEvent -> {
		iter(keys, \k -> {
			if (matchShortcut(key, parseShortcut(k.first))) {
				k.second()
			}
		})
	};

    MConstruct(
		[makeSubscribe(keyFilter.pressed, keyHandler)],
		MInteractive(
			[keyFilter],
			m
		)
	);
}

