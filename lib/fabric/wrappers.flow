import fabric/env;

export {
	BLines(items : [Fabric], style : BContainerStyle) -> Fabric;
	BCols(items : [Fabric], style : BContainerStyle) -> Fabric;
	BBCols(items : [Fabric], style : BContainerStyle) -> Fabric;
	BGroup(items : [Fabric], style : BContainerStyle) -> Fabric;

	BText(text : string, style : [MTextStyle]) -> Fabric;
	BTextInput(name : string, style : [MTextInputStyle], state : [MTextInputState]) -> Fabric;
	BTextButton(text : string, onClick : (FabricEnv) -> void, style : [MTextButtonStyle], state : [MButtonState]) -> Fabric;
}

BLines(items : [Fabric], style : BContainerStyle) -> Fabric {
	BContainer(items, BContainerStyle(style with downwards = true, group = false))
}

BCols(items : [Fabric], style : BContainerStyle) -> Fabric {
	BContainer(items, BContainerStyle(style with downwards = false, group = false))
}

BBCols(items : [Fabric], style : BContainerStyle) -> Fabric {
	BContainer(items, BContainerStyle(style with downwards = false, group = false, baseline = true))
}

BGroup(items : [Fabric], style : BContainerStyle) -> Fabric {
	BContainer(items, BContainerStyle(style with downwards = false, group = true))
}

BText(text : string, style : [MTextStyle]) -> Fabric {
	BMaterial(MText(text, style))
}

BTextInput(name : string, style : [MTextInputStyle], state : [MTextInputState]) -> Fabric {
	BGetEnv(\env -> {
		value = getOrMakeFabricValue(env, name, "");
		BMaterial(MTextInput(value, style, state))
	})
}

BTextButton(text : string, onClick : (FabricEnv) -> void, style : [MTextButtonStyle], state : [MButtonState]) -> Fabric {
	BGetEnv(\env -> {
		BMaterial(MTextButton(text, \ -> {
			onClick(env)
		}, style, state))
	})
}
