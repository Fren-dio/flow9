import material/material;
import material/material_dialog;

export {
	Fabric ::= BLet, BCapture, BSelect, BContainerX, BTableX, BMaterial, BGetEnv, BBidirectional, BDialog, BTimer;

	BLet(name : string, value : flow, scope : Fabric);
	BCapture(name : string, value : flow, scope : Fabric);
	BSelect(names : [string], fn : (FabricEnv, values : [flow]) -> Fabric);
	BContainerX(items : [Fabric], style : BContainerStyle);
		BContainerStyle(downwards : bool, group : bool, baseline : bool);
		defBContainer() -> BContainerStyle;
	BTableX(rows : [[Fabric]], style : BTableStyle);
		BTableStyle();
	BMaterial(material : Material);

	BGetEnv(fn : (FabricEnv) -> Fabric);

	BBidirectional(a : string, b : string, a2b : (flow) -> flow, b2a : (flow) -> flow);
	
	BTimer(name : string, deltaS : double);

	BDialog(name : string, contents : Fabric, style : [MDialogStyle]);

	// Environment stuff
	FabricEnv(parent : Maybe<FabricEnv>, values : ref Tree<string, DynamicBehaviour<flow>>);
}

defBContainer() -> BContainerStyle {
	BContainerStyle(true, false, false)
}
